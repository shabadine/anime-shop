{% extends 'base.html.twig' %}

{% block title %}Accueil - Anime Goodies Shop{% endblock %}

{% block body %}
<header class="hero-section py-5 position-relative text-white" role="banner"
      style="background: url('{{ asset('images/hero-anime.jpg') }}') center/cover no-repeat;">
  <div class="position-absolute top-0 start-0 w-100 h-100 bg-dark opacity-50"></div>
  <div class="container position-relative z-1 text-center">
    <h1 id="hero-title" class="hero-title">
        Anime Goodies Shop
        <img src="{{ asset('images/logo.svg') }}"
            alt="Logo Anime Shop"
            width="60"
            height="60"
            loading="lazy">
    </h1>
    <p class="hero-subtitle mb-4">
      Les goodies officiels de tes animes préférés, livrés en 48h !
    </p>
    <a href="{{ path('app_catalog') }}" class="btn btn-lg px-5 py-3 hero-btn-red" aria-label="Voir le catalogue des produits">
        <i class="bi bi-arrow-right"></i> Voir le catalogue
    </a>
  </div>
</header>

<section class="py-5" aria-labelledby="section-title">
    <div class="container">
        <h2 id="section-title" class="text-center section-title text-danger">Meilleures ventes <i class="bi bi-fire"></i> </h2>
        
        <div class="row g-4">
            {% for product in featuredProducts %}
                <div class="col-md-3">
                    <article class="card h-100 shadow-sm product-card" aria-labelledby="product-{{ product.id }}-title">
                        
                        {% if product.image %}
                            <img src="{{ asset('uploads/products/' ~ product.image) }}" 
                                 alt="{{ product.name }}" 
                                 class="card-img-top"
                                 width="300" height="300"
                                 style="object-fit: cover;">
                        {% else %}
                            <div class="bg-secondary text-white d-flex align-items-center justify-content-center" style="height: 300px;" role="img" aria-label="Image non disponible">
                                <span>Image produit</span>
                            </div>
                        {% endif %}

                        <div class="bg-dark text-white p-2">
                            <h3 id="product-{{ product.id }}-title" class="h5 card-title text-center mb-0">
                                {{ product.name }}
                            </h3>
                        </div>

                        <div class="card-body d-flex flex-column">
                            <p class="text-muted small">Anime : {{ product.animeName }}</p>
                            <p class="card-text text-truncate">{{ product.description|slice(0, 80) }}...</p>
                            <div class="mt-auto d-flex justify-content-between align-items-center">
                                <span class="h4 mb-0 product-price fw-bold text-danger">{{ product.price }}€</span>
                                
                                <a href="{{ path('app_product_show', {slug: product.slug}) }}" 
                                   class="btn btn-danger btn-sm"
                                   aria-label="Voir les détails de {{ product.name }}">Voir</a>
                            </div>
                        </div>
                    </article>
                </div>
            {% endfor %}
        </div>
    </div>
</section>



<section class="py-5 bg-white border-top" role="region" aria-label="Appel à l'action">
    <div class="container text-center">
        <h2 class="h3">Envie de découvrir plus de produits ?</h2>
        <p class="lead">Explorez notre catalogue complet</p>
        <a href="{{ path('app_catalog') }}" class="btn btn-dark btn-lg">Voir tout le catalogue</a>
    </div>
</section>
{% endblock %}